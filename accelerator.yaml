accelerator:
  displayName: ACME Inc. Spring Web Application
  description: An example starting template for offical spring web application at ACME Inc.
  iconUrl: https://raw.githubusercontent.com/sample-accelerators/icons/master/icon-cloud.png
  tags:
    - Java
    - Spring
    - Web
    - JPA
    - Test
  options:
    - name: companyPkg
      inputType: text
      dataType: string
      display: true
      required: true
      defaultValue: "com.acme"
    - name: javaVersion
      inputType: select
      dataType: string
      display: true
      required: true
      defaultValue: "11"
      choices:
        - text: 11 (Supported in Production)
          value: "11"
        - text: 17 (Production in Jan 2022, QA only for now)
          value: "17"
engine:
  merge:
    - include: [ "**/**" ]
      exclude: [ "reg.yaml", "**/*.java" ]
    - include: [ "settings.gradle.kts" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: example-spring-accelerator
              with: "#artifactId"
    - include: [ "buildSrc/src/main/kotlin/java-library-conventions.gradle.kts" ]
      condition: "#javaVersion == '17'"
      chain:
        - type: ReplaceText
          substitutions:
            - text: JavaLanguageVersion.of(11)
              with: "'JavaLanguageVersion.of(17)'"
    - include: [ "**/*.java" ]
      chain:
        - type: OpenRewriteRecipe
          recipe: org.openrewrite.java.ChangePackage
          parseOrFail: true
          options:
            oldFullyQualifiedPackageName: "'com.example'"
            newFullyQualifiedPackageName: "#companyPkg"
            recursive: true